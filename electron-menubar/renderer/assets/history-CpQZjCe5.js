import{r,j as e,a as C,R as b,b as H}from"./globals-B-VILdgX.js";import{B as t,I as S,C as k,d as A}from"./input-QIpsq--5.js";import{H as p,T as u,b as I,S as j,c as E,C as P,B as f,Z as z,a as B}from"./scroll-area-KYblTtPR.js";import{X as R,C as D}from"./x-B4rIwNK5.js";function F(){const[o,n]=r.useState([]),[c,d]=r.useState("all"),[l,h]=r.useState(""),[g,x]=r.useState(null);r.useEffect(()=>{(async()=>{const a=await window.electronAPI.getHistory();n(a)})(),window.electronAPI.onHistoryUpdated(a=>n(a))},[]);const y=async s=>{await window.electronAPI.copyHistoryItem(s.id),x(s.id),setTimeout(()=>x(null),1500)},w=async s=>{await window.electronAPI.deleteHistoryItem(s)},v=async s=>{await window.electronAPI.toggleFavorite(s),n(a=>a.map(i=>i.id===s?{...i,favorite:!i.favorite}:i))},N=async()=>{confirm("Wirklich alle Einträge löschen?")&&await window.electronAPI.clearHistory()},m=o.filter(s=>c==="all"||s.favorite).filter(s=>l?(s.polished||s.transcript).toLowerCase().includes(l.toLowerCase()):!0);return e.jsxs("div",{className:"min-h-screen bg-background p-5",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-9 h-9 rounded-lg bg-primary flex items-center justify-center shadow-sm",children:e.jsx(p,{className:"w-5 h-5 text-primary-foreground"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-lg font-semibold",children:"History"}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[o.length," Einträge"]})]})]}),e.jsxs(t,{variant:"ghost",size:"sm",onClick:N,children:[e.jsx(u,{className:"w-4 h-4 mr-1"}),"Alle löschen"]})]}),e.jsxs("div",{className:"flex gap-2 mb-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(I,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),e.jsx(S,{value:l,onChange:s=>h(s.target.value),placeholder:"Suchen...",className:"pl-9"}),l&&e.jsx("button",{onClick:()=>h(""),className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground",children:e.jsx(R,{className:"w-4 h-4"})})]}),e.jsx(t,{size:"sm",variant:c==="all"?"default":"outline",onClick:()=>d("all"),children:"Alle"}),e.jsxs(t,{size:"sm",variant:c==="favorites"?"default":"outline",onClick:()=>d("favorites"),children:[e.jsx(j,{className:"w-4 h-4 mr-1"}),"Favoriten"]})]}),e.jsx(E,{className:"h-[calc(100vh-180px)]",children:e.jsx("div",{className:"space-y-2 pr-2",children:m.length===0?e.jsxs("div",{className:"py-12 text-center text-muted-foreground",children:[e.jsx(p,{className:"w-12 h-12 mx-auto mb-3 opacity-20"}),e.jsx("p",{children:"Keine Einträge"})]}):m.map(s=>e.jsx(k,{className:"group",children:e.jsx(A,{className:"p-3",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm line-clamp-2",children:s.polished||s.transcript}),e.jsxs("div",{className:"flex items-center gap-2 mt-2 text-xs text-muted-foreground",children:[e.jsx(P,{className:"w-3 h-3"}),new Date(s.timestamp).toLocaleString("de-DE",{day:"2-digit",month:"2-digit",hour:"2-digit",minute:"2-digit"}),e.jsxs(f,{variant:"outline",className:"text-xs py-0",children:[s.wordCount," W"]}),s.polishUsed&&e.jsxs(f,{variant:"secondary",className:"text-xs py-0",children:[e.jsx(z,{className:"w-3 h-3 mr-1"}),"Polish"]})]})]}),e.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsx(t,{size:"icon",variant:"ghost",className:"h-7 w-7",onClick:()=>v(s.id),children:e.jsx(j,{className:C("w-4 h-4",s.favorite&&"fill-primary text-primary")})}),e.jsx(t,{size:"icon",variant:"ghost",className:"h-7 w-7",onClick:()=>y(s),children:g===s.id?e.jsx(D,{className:"w-4 h-4 text-primary"}):e.jsx(B,{className:"w-4 h-4"})}),e.jsx(t,{size:"icon",variant:"ghost",className:"h-7 w-7 text-destructive",onClick:()=>w(s.id),children:e.jsx(u,{className:"w-4 h-4"})})]})]})})},s.id))})})]})}b.createRoot(document.getElementById("root")).render(e.jsx(H.StrictMode,{children:e.jsx(F,{})}));
